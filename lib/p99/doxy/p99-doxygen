#     -*- mode: makefile; comment-start: "# "; -*-
#
# This file is meant to ease the documentation with doxygen of code
# that uses P99.  It just defines some macros and watches that doxygen
# interprets them well.  Include this file here into your "Doxyfile"
# with the following two lines
#
# @INCLUDE_PATH          += doxy/
# @INCLUDE                = p99-doxygen
#
# where the path should correspond to the directory where you found
# this configuration file here.
#
# Additionally you should probably also set something like
#
# INCLUDE_PATH           += /your/path/to/p99/
# TAGFILES               += "p99-tagfile = http://p99.gforge.inria.fr/p99-html/"
#
# to ensure that your run of doxygen also actually see the P99 include
# files and also that the P99 documentation is nicely linked.
#
# Please share your experience of using P99 together with doxygen with
# us and in particular tell us if you had to add to the following
# definitions to make the result of doxygen look nicer.

# Prefixes that P99 uses for internal use
EXCLUDE_SYMBOLS        += P00_*
EXCLUDE_SYMBOLS        += p00_*
EXCLUDE_SYMBOLS        += _p00*
EXCLUDE_SYMBOLS        += P99X__*
EXCLUDE_SYMBOLS        += p99x__*
EXCLUDE_SYMBOLS        += *_defarg_[0-9]
EXCLUDE_SYMBOLS        += P99_DUPL_*
EXCLUDE_SYMBOLS        += P99_IS_EQ_*

# A set of macros that are just too complicated that doxygen can make
# something reasonable out of them.
PREDEFINED += DOXYGEN
PREDEFINED += P00_DECLARE_ATOMIC_CHOICE(x,y,z)="/** \see _Atomic for a detail description of the atomic implementation */ typedef struct z z"
PREDEFINED += P00_DOXYGEN
PREDEFINED += P99_BUILTIN_MAX(x)="P00_BUILTIN_MAX_ ## x"
PREDEFINED += P99_BUILTIN_MIN(x)="P00_BUILTIN_MIN_ ## x"
PREDEFINED += P99_BUILTIN_TYPE(x,y)="P00_BUILTIN_TYPE_ ## x ## y"
PREDEFINED += P99_COMPILETIME_ASSERT(x,y)=
PREDEFINED += P99_CONSTANT(x,y,z)="register x const y = z"
PREDEFINED += P99_DECLARE_ATOMIC(x)="/** \see _Atomic for a detail description of the atomic implementation */ typedef struct atomic_ ## x x"
PREDEFINED += P99_DECLARE_INIT_ONCE(T, NAME, ARG)="/** @remark wrapper type around a T that is initialized once */ typedef struct NAME NAME"
PREDEFINED += P99_DECLARE_THREAD_LOCAL(T,NAME)="/** \brief a thread local variable **/ T NAME"
PREDEFINED += P99_TSS_DECLARE_LOCAL(T,NAME)="/** \brief a thread local variable **/ T NAME"
PREDEFINED += P99_DECLARE_ONCE_CHAIN(T)="/** \brief chain the 'static' initialization for T **/ p99_once_flag p99_ ## T ## _once"
PREDEFINED += P99_DEFINE_ONCE_CHAIN(T)="p99_once_flag p99_ ## T ## _once"
PREDEFINED += P99_FSYMB(x):="x ## _symbol"
PREDEFINED += P99_LIFO(x):="_Atomic p00_lifo_ ## T"
PREDEFINED += P99_LINEID(x):="p00_unique_id ## x"
PREDEFINED += P99_MACRO_END(_1, ...)=
PREDEFINED += P99_PASTE2(_1, _2):="_1 ## _2"
PREDEFINED += P99_PASTE3(_1, _2, _3):="_1 ## _2 ## _3"
PREDEFINED += P99_PASTE4(_1, _2, _3, _4):="_1 ## _2 ## _3 ## _4"
#PREDEFINED += P99_TP_REF_FUNCTIONS(T):=""
PREDEFINED += _Atomic(X)="atomic_ ## X"
PREDEFINED += p99_inline="inline"
PREDEFINED += static_inline="inline"

# macros that should be forcably exanded to produce good documentation
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_b
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_c
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_d
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_dc
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_f
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_fc
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_h
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_hh
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_i
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_i128
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_i16
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_i32
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_i64
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_i8
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_j
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_l
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_ld
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_ldc
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_ll
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_t
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_u
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_u128
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_u16
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_u32
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_u64
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_u8
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_uc
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_uh
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_uhh
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_uj
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_ul
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_ull
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_uz
EXPAND_AS_DEFINED += P00_BUILTIN_TYPE_v
EXPAND_AS_DEFINED += P00_C99_DEFARG_DOCU
EXPAND_AS_DEFINED += P00_DECLARE_ARI2STR
EXPAND_AS_DEFINED += P00_DECLARE_DELETE
EXPAND_AS_DEFINED += P00_DECLARE_OVERFLOW
EXPAND_AS_DEFINED += P00_DECLARE_SC
EXPAND_AS_DEFINED += P00_DECLARE_STRTO
EXPAND_AS_DEFINED += P00_DECLARE_STRTOU
EXPAND_AS_DEFINED += P00_DOCUMENT_DECLARATION_ARGUMENT
EXPAND_AS_DEFINED += P00_DOCUMENT_DESIGNATOR_ARGUMENT
EXPAND_AS_DEFINED += P00_DOCUMENT_ID
EXPAND_AS_DEFINED += P00_DOCUMENT_IDENTIFIER_ARGUMENT
EXPAND_AS_DEFINED += P00_DOCUMENT_MACRO_ARGUMENT
EXPAND_AS_DEFINED += P00_DOCUMENT_MULTIPLE_ARGUMENT
EXPAND_AS_DEFINED += P00_DOCUMENT_NUMBER_ARGUMENT
EXPAND_AS_DEFINED += P00_DOCUMENT_PERMITTED_ARGUMENT
EXPAND_AS_DEFINED += P00_DOCUMENT_PROMOTE
EXPAND_AS_DEFINED += P00_DOCUMENT_SIGNED
EXPAND_AS_DEFINED += P00_DOCUMENT_STATEMENT_ARGUMENT
EXPAND_AS_DEFINED += P00_DOCUMENT_TYPE_ARGUMENT
EXPAND_AS_DEFINED += P00_DOCUMENT_TYPE_IDENTIFIER_ARGUMENT
EXPAND_AS_DEFINED += P00_DOCUMENT_UNSIGNED
EXPAND_AS_DEFINED += P00_DOCUMENT_WARN_VLA_ARGUMENT
EXPAND_AS_DEFINED += P00_IF_CLAUSE
EXPAND_AS_DEFINED += P00_ONE_TOK
EXPAND_AS_DEFINED += P00_ORWL_ALIAS
EXPAND_AS_DEFINED += P00_POSIX_DEFARG_DOCU
EXPAND_AS_DEFINED += P00_PROTOTYPE
EXPAND_AS_DEFINED += P00_SPRINT_DEFINE
EXPAND_AS_DEFINED += P00_UNIQUE_BIT
EXPAND_AS_DEFINED += P99_BLOCK_DOCUMENT
EXPAND_AS_DEFINED += P99_BUILTIN_MAX
EXPAND_AS_DEFINED += P99_BUILTIN_MIN
EXPAND_AS_DEFINED += P99_BUILTIN_TYPE
EXPAND_AS_DEFINED += P99_CALL_DEFARG
EXPAND_AS_DEFINED += P99_CAT2
EXPAND_AS_DEFINED += P99_CONSTANT
EXPAND_AS_DEFINED += P99_DECLARE_ATOMIC
EXPAND_AS_DEFINED += P99_DECLARE_DEFARG
EXPAND_AS_DEFINED += P99_DECLARE_DELETE
EXPAND_AS_DEFINED += P99_DECLARE_ENUM
EXPAND_AS_DEFINED += P99_DECLARE_ENUM_GETNAME
EXPAND_AS_DEFINED += P99_DECLARE_INIT_ONCE
EXPAND_AS_DEFINED += P99_DECLARE_INLINE_EXPRESSION
EXPAND_AS_DEFINED += P99_DECLARE_ONCE_CHAIN
EXPAND_AS_DEFINED += P99_DECLARE_STRUCT
EXPAND_AS_DEFINED += P99_DECLARE_UNION
EXPAND_AS_DEFINED += P99_DEFARG_DOCU
EXPAND_AS_DEFINED += P99_DEFINE_DEFARG
EXPAND_AS_DEFINED += P99_DEFINE_DELETE
EXPAND_AS_DEFINED += P99_DEFINE_ONCE_CHAIN
EXPAND_AS_DEFINED += P99_DEFINE_UNION
EXPAND_AS_DEFINED += P99_DEPRECATED
EXPAND_AS_DEFINED += P99_DERIVED_TYPES
EXPAND_AS_DEFINED += P99_IF_EQ
EXPAND_AS_DEFINED += P99_IF_EQ_2
EXPAND_AS_DEFINED += P99_INSTANTIATE
EXPAND_AS_DEFINED += P99_MACRO_END
EXPAND_AS_DEFINED += P99_PASTE2
EXPAND_AS_DEFINED += P99_PASTE3
EXPAND_AS_DEFINED += P99_PASTE4
EXPAND_AS_DEFINED += P99_PLAIN_TYPE
EXPAND_AS_DEFINED += P99_POINTER_TYPE
EXPAND_AS_DEFINED += P99_PROTOTYPE
EXPAND_AS_DEFINED += P99_TP_REF_DECLARE
EXPAND_AS_DEFINED += P99_TP_REF_DEFINE
EXPAND_AS_DEFINED += P99_TP_REF_FUNCTIONS
EXPAND_AS_DEFINED += P99_TYPEDEFS
EXPAND_AS_DEFINED += P99_VA_ARGS
EXPAND_AS_DEFINED += P99_VA_ARGS_DOCUMENTATION
